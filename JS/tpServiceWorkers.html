<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../style.css">
    <title>Service Workers</title>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="../index.html">Accueil</a></li>
      </ul>
    </nav>

    <h1>TP Service Workers</h1>



  </body>

  <script type="text/javascript">

    window.addEventListener('load', () => {
          		registerSW();

              let cors_url = 'https://cors-anywhere.herokuapp.com/';
              let url = 'https://planning.univ-rennes1.fr/jsp/custom/modules/plannings/9EYlGR3a.shu'


              fetch( cors_url + url ).then(function(response){
                  return response.text();
              }).then(function(text){
                console.log("It Works!");
                //console.log(text);
              });
    });



        	// Register the Service Worker
        	async function registerSW() {
          		if ('serviceWorker' in navigator) {
            		try {
              			await navigator.serviceWorker.register('serviceworker.js');
            		}
            		catch (e) {
              			console.log('SW registration failed');
                    console.log(e);
            		}
          		}
        	}






  </script>
</html>
