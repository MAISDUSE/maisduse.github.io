<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>TP2_2</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
  </head>
  <body>

    <h1>TP2_2</h1>
    <canvas id="canvas" width="300" height="300" ></canvas>
    <br>
    <div class="buttons">
      <button type="button" name="button" onclick="draw()">Draw</button>
      <button type="button" name="button" onclick="reset()">Clear</button>

    </div>


    <script type="text/javascript">

        let Square = function (width, height, context, x, y){
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                    this.ctx = context;

                    this.draw = function ()
                    {
                        context.fillStyle = "red";
                        context.fillRect(this.x, this.y, this.width, this.height);
                    };

                    this.clear = function ()
                    {
                        context.clearRect(this.x, this.y, this.width, this.height);
                    };

                    this.draw();
                }

        let canvas = document.querySelector('canvas');
        let context = canvas.getContext('2d');
        context.fillStyle = "rgba(255,0,0,0.5)" ;

        function drawInit()
        {
            context.strokeStyle = "white";
            context.strokeRect(0, 0, canvas.width, canvas.height);
        }

        function moving (square)
        {
            let moving = setInterval(() => {

                square.clear();

                square.x += 10;

                square.draw();

                if (square.x + square.width >= canvas.width - 10) clearInterval(moving);

            }, 100);
        }




    window.addEventListener('load', (event) => {
                drawInit();

                let square1 = new Square(25, 25, context, 10, 10);
                let square2 = new Square(25, 25, context, 10, 40);
                let square3 = new Square(25, 25, context, 10, 70);

                setTimeout(() => moving(square1), 1000);
                setTimeout(() => moving(square2), 2000);
                setTimeout(() => moving(square3), 3000);

            });

    </script>

  </body>
</html>
